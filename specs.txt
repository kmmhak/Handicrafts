
Kaikki käyttäjät:
 ✓   GET kaikkien kohteiden haku
 ✓	 GET toisen käyttäjän myyntikohteiden haku
 ✓   POST käyttäjän luominen
 ✓	POST login

Kaikki kirjautuneet käyttäjät:
    
 ✓   POST login 
 ✓   POST myynti-ilmoitusten teko
 ✓   POST ostojen teko ja jonottaminen

 ✓  DELETE oman käyttäjätunnuksen poistaminen
 ✓  DELETE oman myyntikohteen poistaminen

 ✓  GET omien myyntikohteiden haku    
    GET haku otsikon/osaston/kuvauksen perusteella
 ✓  GET omien ostojen ja jonotettavien tavaroiden haku
 ✓	GET logout

 ✓  PUT käyttäjän omien ilmoitusten päivittäminen
 ✓  PUT käyttäjän omien tietojen päivittäminen

Admin
 ✓  DELETE kaikkien käyttäjien poistaminen
 ✓  DELETE kaikkien myyntikohteiden poistaminen
 ✓  DELETE kaikkien tarjousten poistaminen

 ✓  PUT kaikkien käyttäjien ilmoitusten muuttaminen
 ✓	PUT admin-oikeuksien antaminen ja poistaminen

TIETOKANNAN LUONTI

create type roleEnum as enum ('regular', 'admin', 'master');

create table users(
id bigserial primary key NOT NULL,
name varchar(200) NOT NULL,
email varchar(200) NOT NULL,
password varchar(200) NOT NULL,
role roleEnum,
UNIQUE (email)
);


CREATE TABLE categories (
id serial primary key NOT NULL,
name varchar(50) NOT NULL
);

INSERT INTO categories(name)
VALUES
('Kankaat'),
('Ompelutarvikkeet'),
('Neulelangat'),
('Neuletarvikkeet'),
('Nypläystarvikkeet')
;

CREATE TABLE subcategories (
id serial primary key NOT NULL,
name varchar(50) NOT NULL
);

INSERT INTO subcategories(name)
VALUES
('Trikoo'),
('Puuvilla'),
('Pellava'),
('Scuba'),
('Viskoosi'),
('Ompelulangat'),
('Tukikankaat'),
('Sakset'),
('Napit'),
('Vetoketjut'),
('Ompelukonetarvikkeet'),
('Mitat'),
('Villalangat'),
('Puuvillalangat'),
('Keinokuitulangat'),
('Puikot'),
('Virkkuukoukut'),
('Muut neuletarvikkeet'),
('Nypläystyynyt'),
('Nypylät'),
('Muut nypläystarvikkeet')
;


create type unitEnum as enum ('kpl', 'cm');

CREATE TABLE products(
id bigserial primary key NOT NULL,
name varchar(50) NOT NULL,
brand varchar(50),
photo varchar,
length float NOT NULL,
unit unitEnum,
color varchar(30),
description varchar NOT NULL,
price float NOT NULL,
fk_categories_id int not NULL,
fk_subcategories_id int not NULL,
fk_users_id int not NULL,
CONSTRAINT fk_categories_id
	FOREIGN KEY(fk_categories_id)
		REFERENCES categories(id)
		ON DELETE CASCADE
		ON UPDATE CASCADE,
CONSTRAINT fk_subcategories_id
	FOREIGN KEY(fk_subcategories_id)
		REFERENCES subcategories(id)
		ON DELETE CASCADE 
		ON UPDATE CASCADE,
CONSTRAINT fk_users_id
	FOREIGN KEY(fk_users_id)
		REFERENCES users(id)
		ON DELETE CASCADE
		ON UPDATE CASCADE

);

INSERT INTO products (name, brand, photo, length, unit, color, description, price, fk_categories_id, fk_subcategories_id, fk_users_id)
VALUES
('Vetoketju', NULL, 'https://ibb.co/cyvYpQg', '15', 'cm', 'punainen', 'Punainen pitsivetoketju, 15 cm pitkä. Ovh 2€, nyt puoleen hintaan', '1', '2', '10', '1'),
('Vihreitä nappeja', NULL, 'https://ibb.co/s25F60h', '1', 'cm', 'vihreä', 'Lajitelma vihreitä nappeja, noin 1 cm halkaisija', '1.5', '2', '9', '1'),
('Metsolan bunny kangas', 'Metsola', 'https://ibb.co/DpDvkjb', '150', 'cm', 'vaaleansininen', 'Suosittu Metsolan pupukangas, pesemätön ja virheetön. 1,5m', '39', '1', '1', '1'),
('Uusia nypylöitä 100 kpl', NULL, 'https://ibb.co/GWQmB0r', '12', 'cm', 'puunvärinen', 'Käyttämättömiä nypylöitä', '79', '5', '20', '2')
;



create table bids (
id bigserial primary key,
fk_products_id int,
fk_users_id int,
bid_time timestamp,
CONSTRAINT fk_products_id
	FOREIGN KEY(fk_products_id)
		REFERENCES products(id)
		ON DELETE CASCADE
		ON UPDATE CASCADE,
CONSTRAINT fk_users_id
	FOREIGN KEY(fk_users_id)
		REFERENCES users(id)
		ON DELETE CASCADE
		ON UPDATE CASCADE
);

INSERT INTO bids (fk_products_id, fk_users_id, bid_time)
VALUES
('5', '1', CURRENT_TIMESTAMP),
('5', '2', CURRENT_TIMESTAMP + '1 minute'),
('6', '1', CURRENT_TIMESTAMP),
('7', '2', CURRENT_TIMESTAMP + '1 hour')
;
<<<<<<< HEAD
=======

https://www.youtube.com/watch?v=vxu1RrR0vbw&t=3711s

                    brand = $2, 
                    photo = $3, 
                    length = $4, 
                    unit = $5, 
                    color = $6, 
                    description = $7, 
                    price = $8, 
                    fk_categories_id = $9, 
                    fk_subcategories_id = $10

                    brand, photo, length, unit, color,description, price, category, subcategory
>>>>>>> 1c9f138 (updated specs.txt)
